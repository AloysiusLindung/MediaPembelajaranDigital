<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MISI 01: CODE PANCASILA</title>
    
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/glass.css">
    <link rel="stylesheet" href="assets/css/animate.css">

    <style>
        /* Style Khusus Halaman Game */
        .hud-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 23, 42, 0.9);
            border-bottom: 1px solid var(--glass-border);
        }

        .hud-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-mono);
            font-weight: bold;
        }

        /* Container Pertanyaan */
        .game-stage {
            display: none; /* Sembunyi default, muncul lewat JS */
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 600px;
            margin: 40px auto;
        }

        .active-stage {
            display: flex;
        }

        /* Indikator Progress (Garis atas) */
        .progress-container {
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.1);
            position: fixed;
            top: 0;
            left: 0;
            z-index: 101;
        }

        .progress-bar {
            height: 100%;
            background: var(--neon-gold);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Chat Simulation Style */
        .chat-box {
            width: 100%;
            height: 300px;
            overflow-y: auto;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .chat-bubble {
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 80%;
            font-size: 0.9rem;
        }

        .chat-left {
            background: rgba(255,255,255,0.1);
            align-self: flex-start;
            border-bottom-left-radius: 0;
        }

        .chat-right {
            background: rgba(6, 182, 212, 0.2);
            align-self: flex-end;
            border-bottom-right-radius: 0;
            text-align: right;
            border: 1px solid var(--neon-cyan);
        }
    </style>
</head>
<body>

    <div class="progress-container">
        <div id="progressBar" class="progress-bar"></div>
    </div>

    <nav class="hud-bar fade-up">
        <div class="hud-item text-gold">
            <span>‚òÖ SKOR:</span>
            <span id="scoreDisplay" class="text-mono" style="font-size: 1.2rem;">0</span>
        </div>
        
        <div class="hud-item text-dim">
            <span id="timerDisplay" class="text-mono" style="font-size: 1.5rem; color: white;">00:00</span>
        </div>

        <div class="hud-item text-red">
            <span>NYAWA:</span>
            <span id="livesDisplay" style="font-size: 1.2rem;">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
        </div>
    </nav>

    <div class="container">

        <div id="stage-briefing" class="game-stage active-stage glass-panel fade-up" style="padding: 40px; text-align: center;">
            <h1 class="text-gold">MISI 01: PANCASILA</h1>
            <p class="text-mono" style="margin-bottom: 20px;">TARGET: PENGAMALAN NILAI</p>
            
            <div style="text-align: left; margin-bottom: 30px; background: rgba(0,0,0,0.2); padding: 20px; border-radius: 8px;">
                <p><strong>INSTRUKSI AGEN:</strong></p>
                <ul style="margin-left: 20px; color: var(--text-dim);">
                    <li>Jawab dengan cepat dan tepat.</li>
                    <li><strong>ZONA 1:</strong> Refleks Toleransi (2 Detik/Soal).</li>
                    <li><strong>ZONA 2:</strong> Analisis Berita (Hoaks vs Fakta).</li>
                    <li><strong>ZONA 3:</strong> Simulasi Chat (Pilih respon bijak).</li>
                </ul>
            </div>

            <button onclick="startGame()" class="btn-tactical btn-gold" style="width: 100%;">
                MULAI MISI [ENTER]
            </button>
        </div>

        <div id="stage-game" class="game-stage glass-panel" style="padding: 30px; min-height: 400px; justify-content: center;">
            
            <div style="margin-bottom: 40px; text-align: center;">
                <span id="questionCategory" class="text-mono text-cyan" style="font-size: 0.8rem; border: 1px solid var(--neon-cyan); padding: 2px 8px; border-radius: 4px;">
                    ZONA 1: REFLEKS
                </span>
                <h2 id="questionText" style="margin-top: 20px; font-size: 1.5rem;">
                    Loading Data...
                </h2>
                <div id="questionImage" style="margin-top: 15px; display: none;">
                    </div>
            </div>

            <div id="answerButtons" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%;">
                <button onclick="checkAnswer(0)" class="btn-tactical" style="width: 100%;">
                    OPSI A
                </button>
                <button onclick="checkAnswer(1)" class="btn-tactical" style="width: 100%;">
                    OPSI B
                </button>
            </div>

            <div id="chatContainer" style="display: none; width: 100%;">
                <div class="chat-box" id="chatBox">
                    </div>
                <div id="chatOptions" style="display: flex; flex-direction: column; gap: 10px;">
                    </div>
            </div>

        </div>

        <div id="stage-finish" class="game-stage glass-panel" style="padding: 40px; text-align: center;">
            <h1 class="text-green" style="font-size: 3rem;">MISI SELESAI</h1>
            <p class="text-dim">DATA REPORT READY</p>
            
            <div style="font-size: 4rem; font-family: var(--font-mono); margin: 20px 0;" class="text-gold">
                <span id="finalScore">0</span>
            </div>
            
            <p style="margin-bottom: 30px;">Poin kamu telah dikunci.</p>

            <button onclick="generateResult()" class="btn-tactical btn-start" style="width: 100%;">
                CETAK KARTU HASIL
            </button>
        </div>

    </div>

    <div style="position: fixed; bottom: 20px; right: 20px; z-index: 999;">
        <button onclick="toggleAccessMenu()" style="background: rgba(0,0,0,0.8); border: 1px solid white; color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;">
            üëÅÔ∏è
        </button>
    </div>

    <div id="accessMenu" class="glass-panel" style="display: none; position: fixed; bottom: 70px; right: 20px; width: 250px; padding: 20px; z-index: 999;">
        <h4 style="margin-top: 0;">ACCESS-OS</h4>
        
        <div style="margin-bottom: 10px;">
            <label class="text-mono" style="font-size: 0.8rem;">HIGH CONTRAST</label><br>
            <button onclick="toggleContrast()" class="btn-tactical" style="padding: 5px 10px; font-size: 0.8rem; margin-top: 5px;">TOGGLE</button>
        </div>

        <div style="margin-bottom: 10px;">
            <label class="text-mono" style="font-size: 0.8rem;">FONT BESAR</label><br>
            <button onclick="toggleFont()" class="btn-tactical" style="padding: 5px 10px; font-size: 0.8rem; margin-top: 5px;">TOGGLE</button>
        </div>
    </div>

    <script src="assets/js/logic-m1.js"></script>

    <script>
        // Script Sederhana untuk Menu Aksesibilitas (UI Only)
        function toggleAccessMenu() {
            const menu = document.getElementById('accessMenu');
            menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
        }
        function toggleContrast() {
            document.body.classList.toggle('high-contrast');
        }
        function toggleFont() {
            document.body.classList.toggle('large-font');
        }
        
        // Redirect sementara untuk tombol "Cetak Kartu Hasil"
        function generateResult() {
            // Simpan skor ke session storage sebelum pindah
            const score = document.getElementById('finalScore').innerText;
            sessionStorage.setItem('last_score', score);
            sessionStorage.setItem('last_mission', 'MISI 01: PANCASILA');
            
            // Pindah ke halaman result
            window.location.href = 'result.html';
        }
    </script>

    <style>
        /* Tambahan CSS untuk Aksesibilitas Font */
        body.large-font {
            font-size: 125%;
        }
        body.high-contrast .glass-panel {
            background: black !important;
            backdrop-filter: none !important;
            border: 2px solid white !important;
        }
    </style>

</body>
</html>